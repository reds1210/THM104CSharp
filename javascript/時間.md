# JavaScript 時間處理 (Date Object)

JavaScript 透過內建的 `Date` 物件來處理日期與時間。

## 1. 建立 Date 物件
建立 `Date` 物件主要有四種方式：

```javascript
// 1. 取得當下時間
const now = new Date();
console.log(now);

// 2. 使用 Timestamp (毫秒數，自 1970-01-01 UTC 起算)
const dateFromTimestamp = new Date(1672531200000);

// 3. 使用日期字串 (建議使用標準 ISO 格式以避免瀏覽器解析差異)
const dateFromString = new Date("2023-10-01T10:30:00");

// 4. 指定年、月、日、時、分、秒、毫秒
// new Date(year, monthIndex, day, hours, minutes, seconds, milliseconds)
// 注意：月份是從 0 開始的 (0 = 1月, 11 = 12月)
const specificDate = new Date(2023, 0, 1, 10, 30, 0); // 2023年1月1日 10:30:00
```

> **重要陷阱**：在使用數值指定月份時，**0 代表 1 月，11 代表 12 月**。但 `day` (日期) 是從 1 開始的。

## 2. 取得時間資訊 (Getters)
取得 `Date` 物件中的各個組成部分：

```javascript
const d = new Date('2023-12-25T15:30:00');

console.log(d.getFullYear());  // 2023 (年)
console.log(d.getMonth());     // 11 (月，注意是 0-11)
console.log(d.getDate());      // 25 (日)
console.log(d.getDay());       // 1 (星期幾，0 = 週日, 1 = 週一 ... 6 = 週六)
console.log(d.getHours());     // 15 (時)
console.log(d.getMinutes());   // 30 (分)
console.log(d.getSeconds());   // 0 (秒)
console.log(d.getTime());      // 1703489400000 (Timestamp)
```

## 3. 設定時間 (Setters)
修改 `Date` 物件的內容：

```javascript
const d = new Date();
d.setFullYear(2025);
d.setMonth(0); // 設定為 1 月
d.setDate(15);
console.log(d); // 2025-01-15 ...
```

### 自動進位/退位特性
JavaScript 的 `Date` 有很好的自動修正功能，可用來計算日期加減。

```javascript
const d = new Date(2023, 0, 31); // 1月31日
d.setDate(d.getDate() + 1);      // 加 1 天
console.log(d.toLocaleDateString()); // 變成 "2023/2/1" (自動換月)
```

## 4. 靜態方法
不需要建立實體即可使用的方法：

- `Date.now()`: 取得當下時間的 Timestamp (毫秒數)。效能比 `new Date().getTime()` 稍好。
- `Date.parse(dateString)`: 解析字串並回傳 Timestamp。

```javascript
const start = Date.now();
// ... 執行某些程式 ...
const end = Date.now();
console.log(`執行時間: ${end - start} ms`);
```

## 5. 日期格式化
將日期轉換為易讀的字串：

```javascript
const d = new Date();

// 1. ISO 8601 標準格式 (常用於資料傳輸)
console.log(d.toISOString()); // e.g., "2023-10-27T08:00:00.000Z"

// 2. 本地時間字串 (依賴瀏覽器語系設定)
console.log(d.toLocaleString());       // e.g., "2023/10/27 上午4:00:00"
console.log(d.toLocaleDateString());   // e.g., "2023/10/27"
console.log(d.toLocaleTimeString());   // e.g., "上午4:00:00"

// 3. 使用 Intl.DateTimeFormat (最強大的格式化工具)
const formatter = new Intl.DateTimeFormat('zh-TW', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    weekday: 'long'
});
console.log(formatter.format(d)); // e.g., "2023年10月27日 星期五"
```

## 6. 常見問題與技巧

### 補零 (Padding)
原生方法取得的月份或日期不會自動補零 (e.g., 取得 `5` 而不是 `05`)。

```javascript
const d = new Date();
const month = (d.getMonth() + 1).toString().padStart(2, '0');
const day = d.getDate().toString().padStart(2, '0');
console.log(`${d.getFullYear()}-${month}-${day}`); // "2023-05-09"
```

### 複製 Date 物件
由於 `Date` 是物件 (傳址參考)，直接賦值會指向同一個記憶體。若要複製：

```javascript
const original = new Date();
const copy = new Date(original.getTime()); // 或 new Date(original)
```
